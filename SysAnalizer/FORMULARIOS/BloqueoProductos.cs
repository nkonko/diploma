// <auto-generated/>
namespace UI
{
    using BLL;
    using System;
    using System.Linq;
    using System.Windows.Forms;

    public partial class BloqueoProductos : Form, IBloqueoProductos
    {
        public const string Key = "bZr2URKx";
        public const string Iv = "HNtgQw0w";

        private readonly IProductoBLL productoBLL;

        public BloqueoProductos(IProductoBLL productoBLL)
        {
            InitializeComponent();
            this.productoBLL = productoBLL;
            CargarProductos();
        }

        private void CargarProductos()
        {
            lstActivos.DataSource =  productoBLL.Cargar().Select(x => x.ProductoId + " - " + x.Descripcion).ToList();
            lstInactivos.DataSource = productoBLL.CargarInactivos().Select(x => x.ProductoId + " - " + x.Descripcion).ToList(); ;
        }

        private void btnActivar_Click_1(object sender, EventArgs e)
        {
            if (lstInactivos.Items.Count > 0)
            {
                var activado = productoBLL.ActivarProducto(lstInactivos.SelectedValue.ToString());

                if (activado)
                {
                    CargarProductos();
                }
            }
        }

        private void btnDesactivar_Click(object sender, EventArgs e)
        {
            if (lstActivos.Items.Count > 0)
            {
                var desactivado = productoBLL.DesactivarProducto(lstActivos.SelectedValue.ToString());
                if (desactivado)
                {
                    CargarProductos();
                }
            }
        }

        private void BloqueoProductos_FormClosing(object sender, FormClosingEventArgs e)
        {
            this.Hide();
            DialogResult = DialogResult.OK;
            e.Cancel = true;
        }

        private void BloqueoProductos_Load(object sender, EventArgs e)
        {
            this.MaximizeBox = false;
            this.MinimizeBox = false;
        }
    }
}
